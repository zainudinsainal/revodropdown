var __awaiter=this&&this.__awaiter||function(t,i,e,r){function n(t){return t instanceof e?t:new e((function(i){i(t)}))}return new(e||(e=Promise))((function(e,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r["throw"](t))}catch(t){o(t)}}function l(t){t.done?e(t.value):n(t.value).then(s,a)}l((r=r.apply(t,i||[])).next())}))};var __generator=this&&this.__generator||function(t,i){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(i){return l([t,i])}}function l(a){if(r)throw new TypeError("Generator is already executing.");while(s&&(s=0,a[0]&&(e=0)),e)try{if(r=1,n&&(o=a[0]&2?n["return"]:a[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;if(n=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:e.label++;return{value:a[1],done:false};case 5:e.label++;n=a[1];a=[0];continue;case 7:a=e.ops.pop();e.trys.pop();continue;default:if(!(o=e.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1];o=a;break}if(o&&e.label<o[2]){e.label=o[2];e.ops.push(a);break}if(o[2])e.ops.pop();e.trys.pop();continue}a=i.call(t,e)}catch(t){a=[6,t];n=0}finally{r=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(t,i,e){if(e||arguments.length===2)for(var r=0,n=i.length,o;r<n;r++){if(o||!(r in i)){if(!o)o=Array.prototype.slice.call(i,0,r);o[r]=i[r]}}return t.concat(o||Array.prototype.slice.call(i))};import{h,r as registerInstance,c as createEvent,H as Host}from"./index-CRX5f2UQ.js";(function t(){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector}if(!Element.prototype.closest){Element.prototype.closest=function(t){var i=this;do{if(Element.prototype.matches.call(i,t)){return i}i=i.parentElement||i.parentNode}while(i!==null&&i.nodeType===1);return null}}})();var UUID="uuid";function getItemLabel(t,i){if(!t){return""}return i?t[i]:t}function getItemValue(t,i){return i?t[i]:t}function doFilter(t,i){var e;var r=[];var n=(e=i===null||i===void 0?void 0:i.trim())===null||e===void 0?void 0:e.toLocaleLowerCase();if(!n){r=t.source}else{for(var o=0,s=t.source;o<s.length;o++){var a=s[o];var l=getItemLabel(a,t.dataLabel);if(typeof l==="string"){l=l.toLocaleLowerCase();switch(t.filter){case"start":if(l.indexOf(n)===0){r.push(a)}break;default:if(l.indexOf(n)>-1){r.push(a)}break}}}}return r}var DropdownListFilter=function(t){var i=function(i){var e=doFilter(t,i);t.onFilterChange({value:i,items:e})};if(!t.filter){t.filter="contains"}i(t.filterValue);if(t.autocomplete){t.value=t.filterValue}return h("input",Object.assign({class:{"filter-box":true},type:"text"},t,{onClick:function(i){i.preventDefault();t.onClick&&t.onClick(i)},onInput:function(e){var r;t.onInput&&t.onInput();var n=(r=e.currentTarget)===null||r===void 0?void 0:r.value;i(n)}}))};var ArrowRenderer=function(){return h("span",{class:"arrow-wrapper"},h("svg",{class:"arrow","aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},h("path",{fill:"currentColor",d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"})))};var revoDropdownStyleCss='revo-dropdown{font-size:1em;font-family:"Roboto", "Helvetica", "Arial", sans-serif;font-weight:400;line-height:2em;letter-spacing:0.01em;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-direction:column;flex-direction:column;vertical-align:top;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;position:relative}revo-dropdown .rv-dr-root{padding:5px 9px;padding-right:35px;-ms-flex-wrap:wrap;flex-wrap:wrap;position:relative;border-radius:4px;cursor:text;display:-ms-inline-flexbox;display:inline-flex;position:relative;font-size:1rem;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-align:center;align-items:center}revo-dropdown input.filter-box{padding-left:6px;padding:9.5px 4px;width:0;min-width:30px;-ms-flex-positive:1;flex-grow:1;text-overflow:ellipsis;border:0;height:1.1876em;margin:0;display:block;background:none;-webkit-box-sizing:content-box;box-sizing:content-box;letter-spacing:inherit;-webkit-animation-duration:10ms;animation-duration:10ms}revo-dropdown input.filter-box:focus{outline:none}revo-dropdown .actions{right:9px;top:calc(50% - 14px);position:absolute}revo-dropdown label{font-size:1rem;z-index:100;top:0;left:0;position:absolute;display:block;-webkit-transform-origin:top left;transform-origin:top left;line-height:1;-webkit-transition:color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, -webkit-transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms;transition:color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, -webkit-transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms;transition:color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms;transition:color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, -webkit-transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms;-webkit-transform:translate(14px, 14px) scale(1);transform:translate(14px, 14px) scale(1);pointer-events:none}revo-dropdown fieldset{border-color:#ececec;top:-5px;left:0;right:0;bottom:0;margin:0;padding:0 8px;overflow:hidden;position:absolute;z-index:0;border-style:solid;border-width:1px;border-radius:inherit;pointer-events:none}revo-dropdown fieldset legend{width:auto;height:11px;display:block;padding:0;font-size:0.75em;max-width:0.01px;text-align:left;-webkit-transition:max-width 50ms cubic-bezier(0, 0, 0.2, 1) 0ms;transition:max-width 50ms cubic-bezier(0, 0, 0.2, 1) 0ms;visibility:hidden}revo-dropdown fieldset legend>span{display:inline-block;padding-left:5px;padding-right:5px}revo-dropdown.shrink label{-webkit-transform:translate(14px, -6px) scale(0.75);transform:translate(14px, -6px) scale(0.75)}revo-dropdown.shrink legend{max-width:1000px;-webkit-transition:max-width 100ms cubic-bezier(0, 0, 0.2, 1) 50ms;transition:max-width 100ms cubic-bezier(0, 0, 0.2, 1) 50ms}revo-dropdown .arrow{width:9px;margin-top:5px;margin-left:5px;opacity:0.4}revo-dropdown .arrow-wrapper{width:15px;text-align:center}revo-dropdown.active label{color:#0089ff}revo-dropdown.active fieldset{border-color:#0089ff}.revo-dropdown-list{font-size:1em;font-family:"Roboto", "Helvetica", "Arial", sans-serif;font-weight:400;line-height:2em;letter-spacing:0.01em;position:absolute;-webkit-transition:opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, -webkit-transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, -webkit-transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, -webkit-transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;z-index:999;display:none;opacity:0}.revo-dropdown-list.top .dropdown-inner{bottom:2px;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.revo-dropdown-list.top .dropdown-inner .filter-box{margin-bottom:0}.revo-dropdown-list:not(.top) .dropdown-inner{top:2px;-ms-flex-direction:column;flex-direction:column}.revo-dropdown-list:not(.top) .dropdown-inner .filter-box{margin-top:0}.revo-dropdown-list .dropdown-inner{display:-ms-flexbox;display:flex;max-height:100%;position:absolute;padding:8px 0;-webkit-box-sizing:border-box;box-sizing:border-box;min-height:16px;min-width:16px;-webkit-box-shadow:0 0 14px 0 rgba(53, 64, 82, 0.05);box-shadow:0 0 14px 0 rgba(53, 64, 82, 0.05);border:1px solid rgba(0, 0, 0, 0.05);border-radius:4px;color:rgba(0, 0, 0, 0.87);overflow:hidden;background-color:#fff}.revo-dropdown-list .dropdown-inner .filter-box{border:1px solid #ececec;min-height:30px;line-height:30px;margin:10px;border-radius:6px}.revo-dropdown-list .dropdown-inner .filter-box:focus{outline:none;border-color:#0089ff}';var RevoDropdown=function(){function t(t){registerInstance(this,t);this.changeValue=createEvent(this,"changed",7);this.close=createEvent(this,"close",7);this.open=createEvent(this,"open",7);this.uuid="";this.isClosing=false;this.currentItem=null;this.isVisible=false;this.autoClose=true;this.source=[];this.appendSource=[];this.placeholder="Select";this.appendTo="body";this.hasFilter=true;this.multiple=false;this.autocomplete=false;this.autoFocus=false}t.prototype.doClose=function(){return __awaiter(this,arguments,void 0,(function(t){var i;if(t===void 0){t=false}return __generator(this,(function(e){if(!t){i=this.close.emit();if(i.defaultPrevented){return[2]}}this.isClosing=true;this.isVisible=false;return[2]}))}))};t.prototype.doOpen=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){t=this.open.emit();if(t.defaultPrevented){return[2]}this.isVisible=true;return[2]}))}))};t.prototype.doChange=function(t,i){return __awaiter(this,void 0,void 0,(function(){var e,r;return __generator(this,(function(n){e=getItemValue(t,this.dataId);if(this.multiple){r=__spreadArray([],this.value||[],true);if(Array.isArray(this.value)){r.push(e)}else{r=[e]}this.value=r}else{this.value=e}this.changeValue.emit({val:this.value,originalEvent:i});if(this.autocompleteInput){this.autocompleteInput.value=this.multiple?"":getItemLabel(this.currentItem,this.dataLabel)}if(this.autoClose&&this.isVisible){this.doClose()}return[2]}))}))};t.prototype.onMouseUp=function(t){var i;if(this.isVisible&&!t.defaultPrevented){var e=!((i=t.target)===null||i===void 0?void 0:i.closest("[".concat(UUID,'="').concat(this.uuid,'"]')));if(e){this.doClose()}}};t.prototype.onKey=function(t){switch(t.code){case"Escape":t.preventDefault();this.doClose();break}};t.prototype.onValueChanged=function(t){var i=this;console.log("onValueChanged",t);if(Array.isArray(t)){this.currentItem=t.map((function(t){return i.getValue(t)}))}else{this.currentItem=this.getValue(t)}console.log("onValueChanged",this.currentItem)};t.prototype.connectedCallback=function(){this.uuid="".concat(this.uuidv4((new Date).getTime()),"-rvdropdown");if(typeof this.value!=="undefined"){this.onValueChanged(this.value)}};t.prototype.disconnectedCallback=function(){this.doClose(true)};t.prototype.componentDidRender=function(){var t=this;if(this.dropdown&&this.appendTo==="body"){document.body.appendChild(this.dropdown)}if(this.isVisible){this.updateStyles()}if(this.dropdownInput){this.dropdownInput.focus()}if(this.autoFocus){if(this.autocomplete){setTimeout((function(){var i;return(i=t.autocompleteInput)===null||i===void 0?void 0:i.focus()}),0)}}};t.prototype.getSelectedItemLabel=function(t){return t&&getItemLabel(t,this.dataLabel)||""};t.prototype.renderDropdown=function(){var t;var i=this;return h("div",{class:"revo-dropdown-list",ref:function(t){return i.dropdown=t}},h("div",(t={},t[UUID]=this.uuid,t.class="dropdown-inner",t.ref=function(t){return i.dropdownInner=t},t),this.hasFilter&&!this.autocomplete?h(DropdownListFilter,{ref:function(t){return i.dropdownInput=t},source:this.source,filter:this.filter,dataLabel:this.dataLabel,value:this.currentFilter||"",filterValue:this.currentFilter||"",onFilterChange:function(t){var e;i.currentFilter=t.value;i.currentSource=t.items.concat(i.appendSource);(e=i.revoList)===null||e===void 0?void 0:e.refresh(i.currentSource)}}):undefined,h("revo-list",{ref:function(t){return i.revoList=t},isFocused:true,sourceItems:this.currentSource,dataLabel:this.dataLabel,onChanged:function(t){return i.doChange(t.detail.item,t.detail.e)}})))};t.prototype.deselect=function(t){if(Array.isArray(this.currentItem)){var i=__spreadArray([],this.currentItem,true);delete i[t];this.currentItem=__spreadArray([],i,true).filter((function(t){return t}))}};t.prototype.renderSelect=function(){var t=this.multiple?"":this.getSelectedItemLabel(this.currentItem);return h("input",{type:"text",disabled:true,class:"filter-box",value:t})};t.prototype.renderAutocomplete=function(){var t=this;var i=this.multiple?"":this.getSelectedItemLabel(this.currentItem);return h(DropdownListFilter,{ref:function(i){return t.autocompleteInput=i},autocomplete:"true",source:this.source,filter:this.filter,dataLabel:this.dataLabel,value:i,filterValue:this.currentFilter,onKeyDown:function(i){if(t.isVisible){return}switch(i.code){case"ArrowUp":case"ArrowDown":i.preventDefault();t.showAutoComplete();break}},onInput:function(){return t.showAutoComplete()},onFocus:function(){return t.showAutoComplete()},onClick:function(){return t.showAutoComplete()},onFilterChange:function(i){var e;t.currentFilter=i.value;t.currentSource=i.items.concat(t.appendSource);(e=t.revoList)===null||e===void 0?void 0:e.refresh(t.currentSource)}})};t.prototype.renderMultiselected=function(){var t=this;var i=[];if(Array.isArray(this.currentItem)){i=__spreadArray([],this.currentItem,true)}if(i.length){return h("div",null,i.map((function(i,e){return h("button",{style:{"margin-left":e>0?"2px":""},onClick:function(i){i.stopPropagation();t.deselect(e)}},h("span",{style:{"margin-right":"5px"}},t.getSelectedItemLabel(i)),h("span",{style:{cursor:"pointer","font-weight":"bold"}},"✕"))})))}};t.prototype.render=function(){var t;var i=this;var e;var r;if(this.isVisible){r=this.renderDropdown()}var n=(t={},t[UUID]=this.uuid,t.class={active:this.isVisible,shrink:this.isVisible||!!this.currentItem||!!((e=this.autocompleteInput)===null||e===void 0?void 0:e.value)},t.ref=function(t){return i.element=t},t.onClick=function(t){return i.selectClick(t)},t);if(this.autocomplete){n["autocomplete"]=true}return h(Host,Object.assign({key:"9ccb049ed09d7588897a83ad3dfb308d8e9eb691"},n),h("label",{key:"c97e4c8dcbbf87b03d3a8d69a22c4e01f9ee0e3e"},this.placeholder),h("div",{key:"4d7f12bd93508dc5385f30645f25ebd06dd39e97",class:"rv-dr-root"},this.multiple&&this.renderMultiselected(),this.autocomplete?this.renderAutocomplete():this.renderSelect(),h("span",{key:"a170b03f042f37b1eae4cc4ce17e787d65d65667",class:"actions"},h(ArrowRenderer,{key:"a1b09246d6e53b8a3b8bac52d56eb5f3a40d5fa3"})),h("fieldset",{key:"45ecfb0b2ec9b26fd7f7aef2af204186b3185981"},h("legend",{key:"a0f9e1ae462d123ca0f9191ae82fc11953206b37"},h("span",{key:"aa56112e44b30774b1351cf9b951af2c820abb47"},this.placeholder)))),r)};t.prototype.showAutoComplete=function(){if(!this.isVisible&&!this.isClosing){this.isVisible=true}this.isClosing=false};t.prototype.getValue=function(t){for(var i in this.source){var e=this.source[i];if(t==getItemValue(e,this.dataId)){return e}}return null};t.prototype.selectClick=function(t){if(t.defaultPrevented){return}if(this.isVisible){this.doClose()}else{this.doOpen()}};t.prototype.updateStyles=function(){if(!this.dropdown){return}var t=this.element.getBoundingClientRect(),i=t.top,e=t.left,r=t.height;var n=this.clientRectangle();var o=i+r+n.top;var s={opacity:1,display:"block"};if(o>n.centerY){s.top="".concat(o-r,"px");s.maxHeight=o-r-n.top-50;this.dropdown.classList.add("top")}else{s.top="".concat(o,"px");s.maxHeight=n.bottom-o-50;this.dropdown.classList.remove("top")}var a=e+n.left;var l=n.right-(a+this.dropdown.clientWidth);if(l<0){a+=l}s.left="".concat(a,"px");this.dropdownInner.style.maxHeight="".concat(Math.min(s.maxHeight,this.maxHeight||s.maxHeight),"px");this.dropdownInner.style.maxWidth=s.maxWidth;for(var c in s){this.dropdown.style[c]=s[c]}};t.prototype.clientRectangle=function(){var t={top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,bottom:0,centerY:0,height:document.body.clientHeight,left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,right:0,width:document.body.clientWidth,centerX:0};t.bottom=t.top+t.height;t.right=t.left+t.width;t.centerY=t.top+t.height/2;t.centerX=t.left+t.width/2;return t};t.prototype.uuidv4=function(t){return"".concat(t,"-xx-y").replace(/[xy]/g,(function(t){var i=Math.random()*16|0,e=t=="x"?i:i&3|8;return e.toString(16)}))};Object.defineProperty(t,"watchers",{get:function(){return{value:["onValueChanged"]}},enumerable:false,configurable:true});return t}();RevoDropdown.style=revoDropdownStyleCss;var revoListStyleCss="revo-list{overflow-x:hidden;overflow-y:auto;max-height:100%;display:block}revo-list ul{margin:0;padding:0;outline:0;list-style:none}revo-list ul>li{width:auto;overflow:hidden;font-size:14px;-webkit-box-sizing:border-box;box-sizing:border-box;min-height:48px;font-weight:400;line-height:1.5;padding-top:6px;white-space:nowrap;padding-bottom:6px;padding-left:16px;padding-right:16px;display:-ms-flexbox;display:flex;position:relative;text-align:left;-ms-flex-align:center;align-items:center;-ms-flex-pack:start;justify-content:flex-start;text-decoration:none;cursor:pointer}revo-list ul>li.selected{background-color:rgba(0, 0, 0, 0.04)}revo-list ul>li:hover{background-color:rgba(0, 0, 0, 0.04)}";var RevoDropdownList=function(){function t(t){registerInstance(this,t);this.changed=createEvent(this,"changed",3);this.currentItem=0;this.sourceItems=[];this.isFocused=false}t.prototype.onKey=function(t){var i;if(!this.isFocused){return}switch(t.code){case"ArrowUp":t.preventDefault();if(this.currentItem<=0){return}this.currentItem--;break;case"ArrowDown":t.preventDefault();if(this.sourceItems[this.currentItem+1]){this.currentItem++}break;case"Tab":t.preventDefault();i=this.sourceItems[this.currentItem];if(i){this.changed.emit({item:i,e:t})}break;case"Enter":t.preventDefault();i=this.sourceItems[this.currentItem];if(i){this.changed.emit({item:i,e:t})}break}};t.prototype.refresh=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){this.sourceItems=t;return[2]}))}))};t.prototype.componentDidRender=function(){var t;(t=this.selectedEl)===null||t===void 0?void 0:t.scrollIntoView({block:"nearest",inline:"nearest"})};t.prototype.render=function(){var t=this;this.selectedEl=undefined;var i=[];var e=function(e){var n=r.sourceItems[e];var o=parseInt(e)===r.currentItem;var s={class:{selected:o},ref:function(i){if(o){t.selectedEl=i}},onClick:function(i){return t.changed.emit({item:n,e:i})}};var a=h("li",Object.assign({key:"12ec212d9d51dedfe992b57475b8ce5330acda0c"},s),getItemLabel(n,r.dataLabel));i.push(a)};var r=this;for(var n in this.sourceItems){e(n)}return h("ul",{key:"834691d43763a29c33a20f7bd2857fb008de012b"},i)};return t}();RevoDropdownList.style=revoListStyleCss;export{RevoDropdown as revo_dropdown,RevoDropdownList as revo_list};
//# sourceMappingURL=revo-dropdown_2.entry.js.map